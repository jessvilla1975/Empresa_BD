--TABLA CLIENTE
CREATE TABLE CLIENTE (
    ID INT PRIMARY KEY,
    NOMBRE VARCHAR(50),
    TELEFONO VARCHAR(15)
);


--TABLA PEDIDO
CREATE TABLE PEDIDO (
    Num_pedido INT PRIMARY KEY,
    Id_Cliente INT NOT NULL,
    Estado VARCHAR(50) NOT NULL,
    Abono FLOAT NOT NULL,
    Fecha_Encargo DATE NOT NULL,
    Fecha_Entrega DATE,
    FOREIGN KEY (Id_Cliente) REFERENCES CLIENTE (ID) ON DELETE CASCADE
);



-- Crear la tabla COLEGIO
CREATE TABLE COLEGIO (
    Id INT PRIMARY KEY,
    Nombre VARCHAR(255) NOT NULL
);



-- Crear la tabla UNIFORME
CREATE TABLE UNIFORME (
    Codigo VARCHAR(50) PRIMARY KEY,
    Id_Colegio INT NOT NULL,
    Tipo VARCHAR(255) NOT NULL,
    Caracteristicas VARCHAR(255),
    FOREIGN KEY (Id_Colegio) REFERENCES COLEGIO (Id) ON DELETE CASCADE
);


-- Crear la tabla PRODUCTO_TERMINADO
CREATE TABLE PRODUCTO_TERMINADO (
    Codigo VARCHAR(50) PRIMARY KEY,
    Num_pedido INT,
    Descripcion VARCHAR(255),
    Cantidad_Existente INT,
    Sexo VARCHAR(50),
    Precio_venta FLOAT NOT NULL,
    Talla VARCHAR(10),
    Medidas VARCHAR(255),
    FOREIGN KEY (Num_pedido) REFERENCES PEDIDO (Num_pedido) ON DELETE CASCADE
);


-- Crear la tabla INVENTARIO
CREATE TABLE INVENTARIO (
    Codigo VARCHAR(50) PRIMARY KEY,
    Cantidad_Existente INT,
    Descripcion VARCHAR(255) NOT NULL,
    FOREIGN KEY (Codigo) REFERENCES PRODUCTO_TERMINADO (Codigo) ON DELETE CASCADE
);


-- Crear la tabla PROVEEDOR
CREATE TABLE PROVEEDOR (
    Nit INT PRIMARY KEY,
    Nombre VARCHAR(25),
    Nom_contacto VARCHAR(25),
    Telefono VARCHAR(20),
    Direccion VARCHAR(25)
);


-- Crear la tabla MATERIA
CREATE TABLE MATERIA (
    Codigo INT PRIMARY KEY,
    Tipo VARCHAR(50),
    Descripcion VARCHAR(255),
    Cantidad_Exist INT,
    Unidad_Medida VARCHAR(50)
);

-- Crear la tabla VENTA 
CREATE TABLE VENTA (
    Codigo_Fact VARCHAR(20) PRIMARY KEY,
    Num_pedido INT NOT NULL,
    Id_Cliente INT,
    Monto_Final FLOAT,
    FOREIGN KEY (Num_pedido) REFERENCES PEDIDO (Num_pedido) ON DELETE CASCADE,
    FOREIGN KEY (Id_Cliente) REFERENCES CLIENTE (ID) ON DELETE CASCADE
);

--crear tabla descuenta
CREATE TABLE DESCUENTA (
    Codigo_Fact VARCHAR(20),
    CODIGO VARCHAR(50),
    FOREIGN KEY (Codigo_Fact) REFERENCES VENTA (Codigo_Fact),
    FOREIGN KEY (CODIGO) REFERENCES INVENTARIO (CODIGO),
    PRIMARY KEY (Codigo_Fact, CODIGO)
);
--crear tabla suministra
CREATE TABLE SUMINISTRA (
    Nit_Proveedor INT,
    Codigo_Materia INT,
    FOREIGN KEY (Nit_Proveedor) REFERENCES PROVEEDOR (Nit),
    FOREIGN KEY (Codigo_Materia) REFERENCES MATERIA (Codigo),
    PRIMARY KEY (Nit_Proveedor, Codigo_Materia)
);
--crear tabla utiliza
CREATE TABLE UTILIZA (
    Cod_prod VARCHAR(50),
    Cod_Materia INT,
    FOREIGN KEY (Cod_prod) REFERENCES PRODUCTO_TERMINADO (Codigo),
    FOREIGN KEY (Cod_Materia) REFERENCES MATERIA (Codigo),
    PRIMARY KEY (Cod_prod, Cod_Materia)
);


